<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chukspace</title>
    <link rel="icon" sizes="1000x1000" type="image/x-icon" href="https://github.com/Tunnox/Images/blob/main/Chukspace%20Logo/Chukspace%20Icon_new.png?raw=true">
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa, #e4ecf4);
            color: #2c3e50;
        }

        /* Header layout */
        header {
            background-color: #ffffff;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            height: 80px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            position: relative;
        }
        header img {
            width: 150px;
            height: auto;
        }

        /* Nav styles */
        nav {
            display: flex;
            gap: 1rem;
        }
        nav a {
            color: #34495e;
            padding: 0.5rem 1rem;
            text-decoration: none;
            font-weight: 500;
            border-radius: 6px;
            transition: all 0.2s ease;
        }
        nav a:hover {
            background-color: #1abc9c;
            color: white;
        }
        nav a.active {
            background-color: #1abc9c;
            color: white;
            font-weight: bold;
        }

        /* Hamburger button */
        .menu-toggle {
            display: none;
            flex-direction: column;
            justify-content: center;
            gap: 5px;
            cursor: pointer;
        }
        .menu-toggle span {
            width: 25px;
            height: 3px;
            background-color: #34495e;
            transition: all 0.3s ease;
        }

        /* Mobile menu hidden by default */
        @media (max-width: 768px) {
            nav {
                display: none;
                position: absolute;
                top: 80px;
                right: 0;
                background-color: #ffffff;
                flex-direction: column;
                width: 200px;
                box-shadow: 0 4px 10px rgba(0,0,0,0.1);
                padding: 1rem 0;
                z-index: 100;
            }
            nav.show {
                display: flex;
            }
            .menu-toggle {
                display: flex;
            }
        }

        main {
            padding: 1rem;
        }
        .card {
            background: #ffffff;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
        }
        .highlight {
            background: #ecf0f1;
        }
        .app-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1rem;
        }
        .app-tile {
            background-color: #1abc9c;
            color: white;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            border-radius: 8px;
            font-weight: bold;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .app-tile:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
        }
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 8px;
            width: 80%;
            height: 80%;
            position: relative;
        }
        .modal iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: red;
            color: white;
            border: none;
            padding: 0.5rem;
            cursor: pointer;
            font-size: 1rem;
        }
         /* Footer */
        footer {
            background-color: #34495e;
            color: white;
            padding: 2rem 1rem;
            text-align: center;
        }
        footer .footer-content {
            max-width: 900px;
            margin: auto;
        }
        footer h4 {
            margin-bottom: 0.5rem;
            color: #1abc9c;
        }
        footer p, footer a {
            color: #ecf0f1;
            text-decoration: none;
            font-size: 0.95rem;
        }
        footer a:hover {
            color: #1abc9c;
        }
        .social-links {
            margin-top: 1rem;
        }
        .social-links a {
            display: inline-block;
            margin: 0 8px;
            font-size: 1.2rem;
        }
        .footer-bottom {
            margin-top: 1.5rem;
            font-size: 0.85rem;
            opacity: 0.8;
        }
         .tabs {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
        margin-bottom: 1rem;
        position: relative;
    }

    .tab {
        cursor: pointer;
        padding: 0.5rem 1rem;
        background: #f4f4f4;
        border-radius: 6px;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        position: relative;
        transition: all 0.3s ease;
    }

    .tab img {
        width: 20px;
    }

    .tab.active {
        background: #0056d2;
        color: #fff;
        transform: translateY(-3px);
    }

    .tab.active::after {
        content: '';
        position: absolute;
        bottom: -15px;
        left: 50%;
        width: 3px;
        height: 15px;
        background: #0056d2;
        transform: translateX(-50%);
    }

    .content {
        background: #fff;
        border-radius: 10px;
        padding: 1rem;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        opacity: 0;
        transform: translateY(10px);
        transition: all 0.4s ease;
    }

    .content.show {
        opacity: 1;
        transform: translateY(0);
    }
    .search-result-item {
    padding: 0.5rem 1rem;
    background: #fff;
    margin: 0.25rem 0;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s;
}
.search-result-item:hover {
    background: #1abc9c;
    color: #fff;
}
.glass-card {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    padding: 1.5rem;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    margin-top: 1rem;
}
button {
    background: #1abc9c;
    border: none;
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.2s;
}
button:hover {
    background: #16a085;
}
.warning-card {
    background: #fff3cd;
    color: #856404;
    border: 1px solid #ffeeba;
    padding: 1rem;
    border-radius: 8px;
    margin-top: 1rem;
    font-size: 0.95rem;
}

/* Search bar styling */
#workerSearch {
    width: 100%;
    max-width: 600px;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    border: 1px solid #ccc;
    border-radius: 12px;
    outline: none;
    transition: all 0.3s ease;
    margin-top: 1rem;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}
#workerSearch:focus {
    border-color: #1abc9c;
    box-shadow: 0 4px 10px rgba(26, 188, 156, 0.2);
}

/* Dropdown results under search bar */
#workerResults {
    max-width: 600px;
    background: #fff;
    border-radius: 10px;
    margin-top: 0.5rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    overflow: hidden;
}
.search-result-item {
    padding: 0.75rem 1rem;
    cursor: pointer;
    border-bottom: 1px solid #f0f0f0;
    transition: background 0.2s;
}
.search-result-item:last-child {
    border-bottom: none;
}
.search-result-item:hover {
    background: #1abc9c;
    color: #fff;
}

    </style>
</head>
<body>
    <header>
        <img src="https://github.com/Tunnox/Images/blob/main/Chukspace%20Logo/Chukspace%20Logo.png?raw=true" alt="Chukspace Logo">
        
        <!-- Hamburger button -->
        <div class="menu-toggle" id="menu-toggle">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <!-- Navigation -->
        <nav id="nav-menu">
            <a href="#" id="nav-home" onclick="setActive(this); showhome()">Home</a>
            <a href="#" id="nav-dashboard" onclick="setActive(this); showDashboard()">Dashboard</a>
            <a href="#" id="nav-about" onclick="setActive(this); loadAbout()">About</a>
            <a href="#" id="nav-policy" onclick="setActive(this); loadPolicy()">Policies</a>
            <a href="#" id="nav-service" onclick="setActive(this); loadServicePlan()">Services and tools</a>
            <a href="#" id="nav-training" onclick="setActive(this); loadServicePlan()">Unboarding and training</a>
        </nav>
    </header>

    <main id="main-content"></main>
    <footer>
        <div class="footer-content">
            <h4>Contact Us</h4>
            <p>Email: <a href="mailto:info@chukspace.org">info@chukspace.org</a></p>
            <p>Phone: +44 123 456 7890</p>
            <div class="social-links">
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            </div>
            <div class="footer-bottom">
                &copy; 2025 Chukspace. All rights reserved.
            </div>
        </div>
    </footer>

    <div id="modal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal()">X</button>
            <iframe id="modal-iframe" src=""></iframe>
        </div>
    </div>

    <script>
        function setActive(element) {
            document.querySelectorAll('nav a').forEach(link => link.classList.remove('active'));
            element.classList.add('active');
        }

        function showhome() { 
            document.getElementById('main-content').innerHTML = `
                <section style="max-width: 1100px; margin: auto; font-family: Arial, sans-serif; line-height: 1.6; color: #333;"> 
                    <div class="card highlight" style="background: url('https://github.com/Tunnox/chukspace/blob/main/api/static/images/Chukspace_newer_home.png?raw=True') no-repeat center center; background-size: cover;"> 
                        <h1 style="text-align: center; color: #1abc9c; font-size: 3rem; margin-bottom: 1rem;">Chukspace</h1> 
                        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"> 
                        <p style=" text-align: center; font-size: 1.25rem; margin-bottom: 3rem; font-family: 'Inter', sans-serif; line-height: 1.6; color: #1a1a1a; "> 
                        Your trusted partner in <strong style="font-weight: 600; color: #0056d2;">Data Stewardship</strong> <br> Enabling secure, compliant, and efficient management of your organisation‚Äôs information assets. </p> 
                    </div> 
                    
                <!-- Executive Summary --> 
                <section style="margin-bottom: 3rem;"> 
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; align-items: center;"> 
                        <div> 
                            <p>Chukspace provides specialised data stewardship services designed to help non-profit organisations manage, protect, and ethically leverage their data in compleiance with UK laws. <br> We offer strategic guidance, operational support, and compliance expertise to ensure data integrity and accessibility.</p> 
                        </div> 
                        <div> 
                            <img src='https://github.com/Tunnox/chukspace/blob/main/api/static/images/Chukspace_suammary.png?raw=True' style="width:100%; border-radius: 10px;"> 
                        </div> 
                    </div> 
                </section> 
                
            <section style="margin-bottom: 3rem;">
              <div class="tabs"> 
                        <div class="tab" onclick="showContent('market')"><img src="https://github.com/Tunnox/Images/blob/main/Chukspace%20Logo/Chukspace%20Icon_new.png?raw=true"> Who we are</div> 
                        <div class="tab" onclick="showContent('operating')"><img src="https://github.com/Tunnox/Images/blob/main/Chukspace%20Logo/Chukspace%20Icon_new.png?raw=true"> What we offer</div> 
                        <div class="tab" onclick="showContent('marketing')"><img src="https://github.com/Tunnox/Images/blob/main/Chukspace%20Logo/Chukspace%20Icon_new.png?raw=true"> Our market plans</div> 
                        <div class="tab" onclick="showContent('legal')"><img src="https://github.com/Tunnox/Images/blob/main/Chukspace%20Logo/Chukspace%20Icon_new.png?raw=true"> We are registered</div> 
                        <div class="tab" onclick="showContent('Trusties')"><img src="https://github.com/Tunnox/Images/blob/main/Chukspace%20Logo/Chukspace%20Icon_new.png?raw=true"> We have Trustees</div> 
                    </div> 
                    
                    <div id="market" class="content" style="display:none;">
                        <img src='https://github.com/Tunnox/chukspace/blob/main/api/static/images/Chukspace_Market_analysis.png?raw=True' style="width:50%; border-radius: 10px;">
                        <p>We are a non-profit service dedicated to providing secure, ethical, and GDPR-compliant data stewardship for churches and faith-based organisations. We combine deep respect for church values with technical expertise, ensuring your data is managed with transparency, integrity, and care.</p> 
                    </div>
                    
                    <div id="operating" class="content" style="display:none;">
                        <ul style="list-style: none; padding-left: 0;">
                            <li><strong>Secure Cloud Hosting</strong> ‚Äì GDPR-compliant infrastructure with backups and access control.</li>
                            <li><strong>Data Quality Assurance</strong> - Data verification and validation, quality control, and Metadata standards</li>
                            <li><strong>Church CRM</strong> ‚Äì Tools for attendance, communications, volunteer management, and more.</li>
                            <li><strong>Data Governance Support</strong> ‚Äì Audits, policy design, and retention planning.</li>
                            <li><strong>Compliance and policy oversight</strong> - Ensure data handling complies with relevant standards (FAIR principles, GDPR, organisational policies) and Monitor data access permissions and licensing.</li>
                            <li><strong>GDPR Compliance</strong> ‚Äì Privacy audits, consent management, and policy templates.</li>
                            <li><strong>Documentation and standardisation</strong> - </li> 
                        </ul> 
                    </div>
                    
                    <div id="marketing" class="content" style="display:none;">
                        <p>We leverage digital marketing, partnerships, and community outreach to promote our services, emphasising trust, expertise, and affordability.</p> 
                    </div>
                    
                    <div id="legal" class="content" style="display:none;">
                        <p>We are registered as an Uniincorporated Charitable Associations</p> 
                    </div>
                    
                    <div id="Trusties" class="content" style="display:none;">
                        <p>We ensure governance through a dedicated board of trustees committed to transparency and ethical operations.</p> 
                    </div> 
                </section>
                <section style="margin-bottom: 3rem;"> 
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; align-items: center;"> 
                        <div> 
                            <img src='https://github.com/Tunnox/chukspace/blob/main/api/static/images/Chukspace_services.png?raw=True' style="width:100%; border-radius: 10px;"> 
                        </div> 
                        <div> 
                            <ul style="list-style: none; padding: 0;"> 
                                <li><h4>Comprehensive Data Management Solutions</h4></li> 
                                <li><h4>Policy Development & Compliance Support</h4></li> 
                                <li><h4>Secure Data Storage & Access Control</h4></li> 
                                <li><h4>Training & Awareness Programs</h4></li> 
                            </ul> </div> 
                        </div> 
                    </section> 
                `; 
            }
        
        function showContent(id) { 
            // Hide all content panels
            document.querySelectorAll('.content').forEach(c => {
                c.style.display = 'none';
                c.classList.remove('show');
            });
        
            // Show selected content with animation
            const activeContent = document.getElementById(id);
            activeContent.style.display = 'block';
            setTimeout(() => activeContent.classList.add('show'), 10);
        
            // Update active tab style
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }
        // ///////////////////// DASHBOARD ////////////////////////////////////////////////
        function showDashboard() {
                document.getElementById('main-content').innerHTML = `
                    <section style="max-width: 900px; margin: auto;">
                        <h1 style="text-align: center; color: #1abc9c; margin-bottom: 2rem;">Dashboard</h1>

                        <!-- Create Admins -->
                        <div class="glass-card">
                            <h3>Create Admins</h3>
                            <p>Search for the worker you want to assign as an admin</p>
                            <input type="text" id="workerSearch" class="form-control" placeholder="Type worker name...">
                            <div id="workerResults" class="mt-3"></div>

                            <!-- Form stays hidden until search success -->
                            <div id="adminForm" class="d-none mt-4">
                                <h3>Create Login</h3>
                                <form id="createAdminForm" style="display: flex; flex-direction: column; gap: 1rem;">
                                    <input type="hidden" id="user_id">
                                    <input type="hidden" id="worker_id">

                                    <label>
                                        Role
                                        <select id="role" style="width:100%; padding:0.6rem; border:1px solid #ccc; border-radius:8px;">
                                            <option value="super_admin">Super Admin</option>
                                            <option value="hod">Head of Department (HOD)</option>
                                            <option value="staff_admin">Staff Admin</option>
                                        </select>
                                    </label>

                                    <label>
                                        Username
                                        <input type="text" id="user_name" placeholder="Enter username" 
                                            style="width:100%; padding:0.6rem; border:1px solid #ccc; border-radius:8px;">
                                    </label>

                                    <label>
                                        Email
                                        <input type="email" id="email" placeholder="Enter email"
                                            style="width:100%; padding:0.6rem; border:1px solid #ccc; border-radius:8px;">
                                    </label>

                                    <label>
                                        Password
                                        <input type="password" id="password" placeholder="Enter password"
                                            style="width:100%; padding:0.6rem; border:1px solid #ccc; border-radius:8px;">
                                    </label>

                                    <button type="submit" style="background:#1abc9c; color:white; padding:0.75rem; border:none; border-radius:8px; cursor:pointer;">Create Admin</button>
                                </form>
                                <div id="adminMessage" class="mt-2"></div>
                            </div>
                        </div>

                        <!-- Worker Approval Section -->
                        <div class="glass-card">
                            <h3>Worker Approvals</h3>
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <span id="approvalNotification" style="background:#e74c3c; color:white; padding:0.5rem 1rem; border-radius:20px; font-weight:bold;">0</span>
                                <select id="approvalDropdown" style="padding:0.5rem; border-radius:8px; border:1px solid #ccc;">
                                    <option value="">Select pending worker...</option>
                                </select>
                            </div>
                            <div id="approvalDetails" class="mt-3"></div>
                        </div>
                    </section>
                `;

                // üîé Worker search (unchanged)
                document.getElementById('workerSearch').addEventListener('input', function () {
                    const keyword = this.value.trim();
                    if (keyword.length < 2) return;

                    fetch('/workers/search', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                        body: new URLSearchParams({ keyword })
                    })
                    .then(res => res.json())
                    .then(data => {
                        const resultsDiv = document.getElementById('workerResults');
                        resultsDiv.innerHTML = '';
                        data.forEach(worker => {
                            const item = document.createElement('div');
                            item.className = 'search-result-item';
                            item.textContent = `${worker.first_name} ${worker.last_name}`;
                            item.onclick = () => {
                                fetch(`/workers/${worker.id}`)
                                    .then(res => res.json())
                                    .then(data => {
                                        resultsDiv.innerHTML = `
                                            <div class="card">
                                                <h3>User Details</h3>
                                                <p><strong>Name:</strong> ${data.user.first_name} ${data.user.last_name}</p>
                                            </div>
                                        `;
                                        const adminForm = document.getElementById('adminForm');
                                        if (data.worker) {
                                            resultsDiv.innerHTML += `
                                                <div class="card">
                                                    <h3>Worker Details</h3>
                                                    <p><strong>Role:</strong> ${data.worker.role}</p>
                                                    <p><strong>Department:</strong> ${data.worker.department}</p>
                                                </div>
                                            `;
                                            adminForm.classList.remove('d-none');
                                            document.getElementById('user_id').value = data.user.id;
                                            document.getElementById('worker_id').value = data.worker.worker_id;
                                        } else {
                                            adminForm.classList.add('d-none');
                                            resultsDiv.innerHTML += `
                                                <div class="warning-card">
                                                    ‚ö†Ô∏è This user is not on the workers register.
                                                </div>
                                            `;
                                        }
                                    });
                            };
                            resultsDiv.appendChild(item);
                        });
                    });
                });

                // ‚ûï Create admin (unchanged logic)
                document.getElementById('createAdminForm').addEventListener('submit', function (e) {
                    e.preventDefault();
                    const payload = {
                        user_id: document.getElementById('user_id').value,
                        worker_id: document.getElementById('worker_id').value,
                        role: document.getElementById('role').value,
                        user_name: document.getElementById('user_name').value,
                        email: document.getElementById('email').value,
                        password: document.getElementById('password').value
                    };

                    fetch('/admin/create', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    })
                    .then(res => res.json())
                    .then(data => {
                        const msg = document.getElementById('adminMessage');
                        if (data.success) {
                            msg.textContent = "‚úÖ Admin login created successfully!";

                            // Clear search box & results
                            document.getElementById('workerSearch').value = '';
                            document.getElementById('workerResults').innerHTML = '';

                            // Reset form fields
                            document.getElementById('createAdminForm').reset();

                            // Hide form again
                            document.getElementById('adminForm').classList.add('d-none');
                        } else {
                            msg.textContent = "‚ùå Failed to create admin.";
                        }
                    });
                });

                // üîî Worker Approvals
                fetch('/approvals/pending')
                    .then(res => res.json())
                    .then(data => {
                        document.getElementById('approvalNotification').textContent = data.length;
                        const dropdown = document.getElementById('approvalDropdown');
                        data.forEach(record => {
                            const opt = document.createElement('option');
                            opt.value = record.worker_id;
                            opt.textContent = `Worker #${record.worker_id} (${record.date_submitted})`;
                            dropdown.appendChild(opt);
                        });
                    });

                // üìã Load full user + worker details on select
                document.getElementById('approvalDropdown').addEventListener('change', function () {
                    const worker_id = this.value;
                    if (!worker_id) return;

                    fetch(`/approvals/details/${worker_id}`)
                        .then(res => res.json())
                        .then(record => {
                            // Build full profile cards
                            const user = record.user;
                            const worker = record.worker;

                            document.getElementById('approvalDetails').innerHTML = `
                                <div class="card" style="margin-bottom:1rem;">
                                    <h3>User Profile</h3>
                                    <p><strong>Full Name:</strong> ${user.first_name} ${user.last_name}</p>
                                    <p><strong>Age:</strong> ${user.age}</p>
                                    <p><strong>Gender:</strong> ${user.gender}</p>
                                    <p><strong>Birthday:</strong> ${user.birthday}</p>
                                    <p><strong>Contact:</strong> ${user.contact_number}</p>
                                    <p><strong>Email:</strong> ${user.email}</p>
                                    <p><strong>Address:</strong> ${user.address}</p>
                                    <p><strong>Department:</strong> ${user.department}</p>
                                    <p><strong>Relationship Status:</strong> ${user.relationship_status}</p>
                                    <p><strong>Consent:</strong> ${user.consent}</p>
                                    <p><em>Created at: ${user.created_at}</em></p>
                                </div>

                                <div class="card">
                                    <h3>Worker Record</h3>
                                    <p><strong>Role:</strong> ${worker.role}</p>
                                    <p><strong>Position Type:</strong> ${worker.position_type}</p>
                                    <p><strong>Department:</strong> ${worker.department}</p>
                                    <p><strong>DOB:</strong> ${worker.date_of_birth}</p>
                                    <p><strong>Emergency Contact:</strong> ${worker.emergency_contact_name} (${worker.emergency_contact_relationship}) - ${worker.emergency_contact_number}</p>
                                    <p><strong>DBS Check Date:</strong> ${worker.dbs_check_date}</p>
                                    <p><strong>DBS Certificate #:</strong> ${worker.dbs_certificate_number}</p>
                                    <p><strong>Safeguarding Training:</strong> ${worker.safeguarding_training_date}</p>
                                    <p><strong>Medical Conditions:</strong> ${worker.medical_conditions}</p>
                                    <p><strong>Consent:</strong> ${worker.consent}</p>
                                    <p><em>Created at: ${worker.created_at}</em></p>
                                </div>

                                <button id="approveBtn" style="margin-top:1rem; background:#27ae60; color:white; padding:0.8rem 1.5rem; border:none; border-radius:8px; cursor:pointer;">Approve Worker</button>
                            `;

                            document.getElementById('approveBtn').onclick = () => {
                                fetch(`/approvals/approve/${worker_id}`, { method: 'POST' })
                                    .then(res => res.json())
                                    .then(resp => {
                                        if (resp.success) {
                                            alert("‚úÖ Worker approved!");
                                            document.querySelector(`#approvalDropdown option[value="${worker_id}"]`).remove();
                                            document.getElementById('approvalDetails').innerHTML = '';
                                            document.getElementById('approvalNotification').textContent =
                                                document.getElementById('approvalDropdown').options.length - 1;
                                        }
                                    });
                            };
                        });
                });
            }




        function loadAbout() {
            document.getElementById('main-content').innerHTML = `
                <section style="max-width: 900px; margin: auto; line-height: 1.6; color: #2c3e50;">
                    <h1 style="text-align: center; color: #1abc9c; font-size: 2.5rem; margin-bottom: 1rem;">
                        About Chukspace
                    </h1>
                    <p style="font-size: 1.1rem; text-align: center; margin-bottom: 2rem;">
                        Ethical Data Stewardship for Faith-Based Impact
                    </p>
                    <div class="card highlight">
                        <h2>Our Mission</h2>
                        <p>Chukspace is a non-profit service dedicated to providing secure, ethical, and GDPR-compliant data stewardship for churches and faith-based organisations. We combine deep respect for church values with technical expertise, ensuring your data is managed with transparency, integrity, and care.</p>
                    </div>
                    <div class="card">
                        <h2>What We Offer</h2>
                        <ul style="list-style: none; padding-left: 0;">
                            <li><strong>Secure Cloud Hosting</strong> ‚Äì GDPR-compliant infrastructure with backups and access control.</li>
                            <li><strong>Data Quality Assurance</strong> - Data verification and validation, quality control, and Metadata standards</li>
                            <li><strong>Church CRM</strong> ‚Äì Tools for attendance, communications, volunteer management, and more.</li>
                            <li><strong>Data Governance Support</strong> ‚Äì Audits, policy design, and retention planning.</li>
                            <li><strong>Compliance and policy oversight</strong> - Ensure data handling complies with relevant standards (FAIR principles, GDPR, organisational policies) and Monitor data access permissions and licensing.</li>
                            <li><strong>GDPR Compliance</strong> ‚Äì Privacy audits, consent management, and policy templates.</li>
                            <li><strong>Documentation and standardisation</strong> - </li> 
                        </ul>
                    </div>
                    <div class="card highlight">
                        <h2>Who We Serve</h2>
                        <p>Our services are designed for UK-based churches, dioceses, and faith-based organisations seeking practical and ethical solutions to their data management challenges. We understand the unique needs of faith communities and tailor our solutions accordingly.</p>
                    </div>
                    <div class="card">
                        <h2>Why Choose Us?</h2>
                        <p>Unlike generic IT services, we blend technical skill with an understanding of church culture and values. We are committed to safeguarding your data as a vital part of your ministry, enabling your mission to thrive in a digital world.</p>
                    </div>
                </section>
            `;
        }

        function loadPolicy() {
            document.getElementById('main-content').innerHTML = `
                <section style="max-width: 900px; margin: auto; line-height: 1.6; color: #2c3e50;">
                    <h1 style="text-align: center; color: #1abc9c; font-size: 2.5rem; margin-bottom: 1rem;">
                        Policy Statements
                    </h1>
                    <p style="font-size: 1.1rem; text-align: center; margin-bottom: 2rem;">
                        Our policies reflect our commitment to ethical data stewardship and full compliance with UK GDPR.
                    </p>

                    <div class="card highlight">
                        <h2>Governance & Accountability</h2>
                        <p>Outlines our dedication to lawful, fair, and transparent processing of personal data, embedding data protection principles into all systems and operations. Covers responsibilities for DPO, Data Steward, Onboarding Lead, and Marketing Lead.</p>
                        <a href="https://www.dropbox.com/scl/fi/your-policy-pdf-link?dl=1" target="_blank" style="color: #1abc9c;">Data Ownership & Custodianship Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-policy-pdf-link?dl=1" target="_blank" style="color: #1abc9c;">Code of Ethics / Responsible Data Use Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-policy-pdf-link?dl=1" target="_blank" style="color: #1abc9c;">Roles & Responsibilities Policy</a><br>
                    </div>

                    <div class="card">
                        <h2>Privacy & GDPR Compliance</h2>
                        <p>Defines how staff, contractors, and volunteers must handle data: collecting only what‚Äôs needed, keeping it accurate and secure, and following all authorisation protocols.</p>
                        <a href="https://www.dropbox.com/scl/fi/bicvau9lr61kjzr7cadul/Staff-Data-Protection-Policy.pdf?rlkey=budsslphrwhdxicc73qm9kcdv&st=7tgs7h9h&dl=0" target="_blank" style="color: #1abc9c;">Staff Data Protection Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-policy-pdf-link?dl=1" target="_blank" style="color: #1abc9c;">Data Subject Rights Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-policy-pdf-link?dl=1" target="_blank" style="color: #1abc9c;">Consent Management Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-policy-pdf-link?dl=1" target="_blank" style="color: #1abc9c;">Data Protection Impact Assessment (DPIA) Policy</a><br>
                    </div>

                    <div class="card highlight">
                        <h2Data Management & Security</h2>
                        <p>Short version of our privacy commitments: we only collect necessary data, use it responsibly, and keep it secure. You have full control over your personal data.</p>
                        <a href="https://www.dropbox.com/scl/fi/your-policy-pdf-link?dl=1" target="_blank" style="color: #1abc9c;">Access Control Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-policy-pdf-link?dl=1" target="_blank" style="color: #1abc9c;">Data Classification Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-policy-pdf-link?dl=1" target="_blank" style="color: #1abc9c;">Data Retention & Disposal Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-policy-pdf-link?dl=1" target="_blank" style="color: #1abc9c;">Encryption Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-policy-pdf-link?dl=1" target="_blank" style="color: #1abc9c;">Incident Response & Breach Notification Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-policy-pdf-link?dl=1" target="_blank" style="color: #1abc9c;">Backup & Disaster Recovery Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-policy-pdf-link?dl=1" target="_blank" style="color: #1abc9c;">Third-Party Vendor & Processor Policy</a><br>
                    </div>

                    <div class="card">
                        <h2>Operational & Compliance Support</h2>
                        <p>Explains how we use essential, analytics, preference, and marketing cookies, and how you can manage your preferences.</p>
                        <a href="https://www.dropbox.com/scl/fi/your-cookie-policy-link?dl=1" target="_blank" style="color: #1abc9c;">Cookie Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-cookie-policy-link?dl=1" target="_blank" style="color: #1abc9c;">Audit & Monitoring Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-cookie-policy-link?dl=1" target="_blank" style="color: #1abc9c;">Change Management Policy</a><br>
                        <a href="https://www.dropbox.com/scl/fi/your-cookie-policy-link?dl=1" target="_blank" style="color: #1abc9c;">Whistleblower Policy</a><br>
                    </div>
                </section>
            `;
        }

        function loadServicePlan() {
            document.getElementById('main-content').innerHTML = `
                <section style="max-width: 900px; margin: auto; line-height: 1.6; color: #2c3e50;">
                    <h1 style="text-align: center; color: #1abc9c; font-size: 2.5rem; margin-bottom: 1rem;">
                        Chukspace Service Plan
                    </h1>
                    <div class="card highlight">
                        <h2>Executive Summary</h2>
                        <p>Chukspace addresses the growing need for secure, ethical, and GDPR-compliant data management in churches and faith-based organisations. We offer a unique combination of technical expertise and faith-aligned values to protect and empower ministries.</p>
                    </div>
                    <div class="card">
                        <h2>Our Services</h2>
                        <ul>
                            <li>Secure Cloud-Based Data Infrastructure with backups and role-based access</li>
                            <li>Custom Church CRM for attendance, communications, and volunteer management</li>
                            <li>Data Stewardship & Governance, including audits and policy design</li>
                            <li>GDPR Compliance Support and training</li>
                        </ul>
                    </div>
                    <div class="card highlight">
                        <h2>Who We Serve</h2>
                        <p>We work with UK churches, dioceses, and faith-based charities of all sizes, tailoring our services to meet their specific data protection and operational needs.</p>
                    </div>
                    <div class="card">
                        <h2>Competitive Advantage</h2>
                        <p>We blend technical expertise with a deep understanding of church culture, providing ethical data solutions that generic IT providers can‚Äôt match.</p>
                    </div>
                    <div class="card highlight">
                        <h2>Technology</h2>
                        <p>Our platform is built with a secure AWS-hosted PostgreSQL backend, end-to-end encryption, audit logs, and two-factor authentication.</p>
                    </div>
                </section>
            `;
        }

        function openModal(url) {
            document.getElementById('modal').style.display = 'block';
            document.getElementById('modal-iframe').src = url;
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
            document.getElementById('modal-iframe').src = '';
        }

        // Load dashboard and set it active on page load
        window.onload = function() {
            showhome();
            setActive(document.getElementById('nav-home'));
        };
    </script>
</body>
</html>
